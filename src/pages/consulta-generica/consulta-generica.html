<!--
  Generated template for the ConsultagenericaPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <ion-title>Consulta de recibos</ion-title>
    </ion-navbar>

</ion-header>

<ion-content padding>
    <ion-card>

        <ion-item>
            <ion-label color="gray" fixed>Plaza </ion-label>
            <ion-select [(ngModel)]="plazaSeleccionada" name='cmbPlaza' interface="action-sheet" placeholder="Seleccionar" cancelText="Cancelar">
                <ion-option *ngFor="let p of plazas" [value]="p">{{p.nombreplaza}} </ion-option>
            </ion-select>
        </ion-item>
        <ion-item *ngIf="selectExtra">
            <ion-label color="gray" fixed>{{etiquetaSelExtra}} </ion-label>
            <ion-select [(ngModel)]="extraSeleccionado" name='cmbExtra' interface="action-sheet" placeholder="Seleccionar" cancelText="Cancelar">
                <ion-option *ngFor="let p of plazas" [value]="p">{{p.nombreTipo}} </ion-option>
            </ion-select>
        </ion-item>
        <ion-searchbar type="tel" [(ngModel)]="numRecibo" placeholder="Buscar por No. de recibo"></ion-searchbar>
        <ion-searchbar type="text" [(ngModel)]="datoExtra" name="txtExtra" placeholder={{phExtra}}></ion-searchbar>
        <button ion-button icon-right full (click)="buscar()"> Buscar
      <ion-icon name="search"></ion-icon>
    </button>
    </ion-card>
    <ion-list>
        <ion-card *ngFor="let item of recibos">

            <ion-item-divider color={{item.color}}>
                <h2>
                    <b class="blanco">RECIBO No. {{item.norecibo}} </b>
                    <span class="naranja" style="float: right;" *ngIf="item.estado=='ANULADO'"><ion-icon name="warning"></ion-icon> {{item.estado}}</span>
                </h2>
                <p class="fecha">{{item.fecha}}</p>
            </ion-item-divider>

            <ion-card-content>
                <table>
                    <tr>
                        <td>Nombre </td>
                        <td>{{item.nombre}}</td>
                    </tr>
                    <tr>
                        <td>{{etiquetaExtra}}</td>
                        <td>{{item.extra}}</td>
                    </tr>
                    <tr>
                        <td>Valor </td>
                        <td>{{item.valor}}</td>
                    </tr>
                </table>
            </ion-card-content>

            <ion-row>
                <ion-col>
                    <button ion-button icon-start clear small (click)="imprimir(item.completo)">
            <ion-icon name="print"></ion-icon>
            <div>Imprimir</div>
          </button>
                </ion-col>
                <ion-col>
                    <button ion-button icon-start clear small (click)="anular(item)">
            <ion-icon name="close"></ion-icon>
            <div>Anular</div>
          </button>
                </ion-col>
                <ion-col align-self-center text-center>
                    <ion-note>
                        {{item.sincronizado}}
                    </ion-note>
                </ion-col>
            </ion-row>
        </ion-card>
    </ion-list>
</ion-content>